{"version":3,"sources":["Home.js","Create.js","Pregame.js","Started.js","Voting.js","Game.js","App.js","serviceWorker.js","index.js"],"names":["axios","require","api","process","Home","useState","games","setGames","useEffect","get","then","r","data","className","to","Object","keys","map","name","i","key","style","marginTop","Create","props","history","useHistory","id","type","autoComplete","htmlFor","onClick","gameName","document","getElementById","value","admin","setName","method","url","headers","res","push","localStorage","setItem","PreGame","slider","M","Range","init","time","players","player","margin","padding","borderRadius","startGame","min","max","onChange","e","updateTime","target","marginBottom","addPlace","places","updatePlace","Started","ends","assign","highlights","highlightsSet","collapsible","querySelectorAll","Collapsible","intrvl","clearInterval","x","zeroPad","num","zero","toString","length","Array","join","distance","Math","floor","Date","now","innerHTML","setInterval","place","startVoting","n","tmp","highlight","Voting","votes","vote","voteSet","endGame","castVote","console","log","ws","Game","match","params","getItem","nameSet","playersSet","timeSet","adminSet","placesSet","endsSet","stage","stageSet","spy","spySet","placeSet","votesSet","modal","Modal","dismissible","initWs","getInstance","open","WebSocket","onmessage","msg","onMessage","onopen","JSON","stringify","send","parse","action","t","backgroundColor","for","username","close","App","basename","path","component","Boolean","window","location","hostname","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.088c8d89.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nconst axios = require('axios');\n\nconst api = process.env.REACT_APP_API\n\nfunction Home() {\n  const [games, setGames] = useState([]);\n\n  useEffect(() => {\n    axios.get(api + '/game')\n    .then(r => setGames(r.data));\n  }, []);\n\n  const showGames = () => {\n    console.log(games)\n  }\n\n  return (\n    <div className=\"container\">\n      <h3>スパイ</h3>\n      <div className=\"section\"></div>\n      <div className=\"row center-align\">\n        <Link to='/create' className=\"btn-small grey darken-1\">Create</Link>\n      </div>\n      <div className=\"row\">\n        {Object.keys(games).map((name, i) =>\n          <div className=\"col s12\" key={i}>\n            <div className=\"col s1 m3\"></div>\n            <div className=\"col s5 m3\">\n              <h4>{name}</h4>\n            </div>\n            <div className=\"col s5 m3 right-align\" style={{marginTop: '25px'}}>\n              <Link to={'/'+name} className=\"btn-small grey darken-1\">Join</Link>\n            </div>\n            <div className=\"col s1 m3\"></div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default Home;\n","import React, { useState, useEffect } from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport { useHistory } from \"react-router-dom\";\nimport M from 'materialize-css';\nconst axios = require('axios');\n\nconst api = process.env.REACT_APP_API\n\nfunction Create(props) {\n  let history = useHistory();\n\n  const createGame = () => {\n    const gameName = document.getElementById('name').value;\n    const admin = document.getElementById('nick').value;\n    props.setName(admin);\n    axios({\n      method: 'post',\n      url: api + '/game',\n      data: {\n        name: gameName,\n        admin: admin\n      },\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    }).then(res =>  history.push('/' + gameName))\n    localStorage.setItem('username', admin)\n  }\n\n\n  return (\n    <div className=\"container\">\n      <div className=\"section\"></div>\n      <div className=\"input-field\">\n        <input id=\"name\" type=\"text\" className=\"validate\" autoComplete=\"off\"/>\n        <label htmlFor=\"name\">Game Name</label>\n      </div>\n      <div className=\"input-field\">\n        <input id=\"nick\" type=\"text\" className=\"validate\" autoComplete=\"off\"/>\n        <label htmlFor=\"nick\">Your Name</label>\n      </div>\n      <div className=\"row\">\n        <div className=\"col s12 center-align\">\n          <a className=\"waves-light btn grey darken-1\" onClick={createGame}>Create</a>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Create;\n","import React, { useState, useEffect } from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport { useHistory } from \"react-router-dom\";\nimport M from 'materialize-css';\nconst axios = require('axios');\n\nconst api = process.env.REACT_APP_API\n\nfunction PreGame(props) {\n\n  useEffect(() => {\n    const slider = document.getElementById('slider');\n    M.Range.init(slider);\n    slider.value = props.time;\n  }, []);\n\n  return (\n    <div className=\"container\">\n      <div className=\"section\"></div>\n      <div className=\"row\">\n        <h6>Players</h6>\n        {props.players.map(player =>\n          <div className=\"col s6 m4 center-align\" key={player}>\n            <div className=\"teal lighten-1\" style={{margin: '15px 10px', padding: '3px', borderRadius: '2px'}}>\n              {player}\n            </div>\n          </div>\n        )}\n      </div>\n      {props.admin ?\n        <div className=\"row\">\n          <div className=\"col s12 center-align\">\n            <a className=\"waves-light btn grey darken-1\" onClick={props.startGame}>Start</a>\n          </div>\n        </div>\n      : null}\n      <div className=\"row\">\n        <h6>Time</h6>\n        <p className=\"range-field\">\n          <input type=\"range\" id=\"slider\" min=\"1\" max=\"20\" value={props.time} onChange={e => props.updateTime(e.target.value)} />\n        </p>\n      </div>\n      <div className=\"row\">\n        <h6>Places</h6>\n        <div className=\"row\">\n          <div className=\"input-field col s6 offset-s2\">\n            <input id=\"place\" type=\"text\" className=\"validate\" autoComplete=\"off\" />\n            <label htmlFor=\"place\">New Place</label>\n          </div>\n          <a className=\"waves-light btn grey darken-1\" style={{marginBottom: '-50px'}} onClick={props.addPlace}>Add</a>\n        </div>\n        {Object.keys(props.places).map((name, i) =>\n          <div className=\"col s6 m4 center-align\" key={i}>\n            <div\n              className={props.places[name] == 1 ? 'pactive truncate' : 'pnotactive truncate'}\n              style={{margin: '15px 10px', padding: '10px 3px', borderRadius: '2px'}}\n              onClick={() => props.updatePlace(name)}>\n              {name}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default PreGame;\n","import React, { useState, useEffect } from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport { useHistory } from \"react-router-dom\";\nimport M from 'materialize-css';\nconst axios = require('axios');\n\nconst api = process.env.REACT_APP_API\n\nfunction Started(props) {\n  const ends = props.ends;\n  const places = props.places;\n  const [highlights, highlightsSet] = useState(Object.assign({},places));\n  const [test, testSet] = useState(true);\n\n\n  useEffect(() => {\n    const collapsible = document.querySelectorAll('.collapsible');\n    M.Collapsible.init(collapsible);\n    intrvl();\n    return () => {\n      clearInterval(x);\n    };\n  });\n\n  const zeroPad = (num, places) => {\n    const zero = places - num.toString().length + 1;\n    return Array(+(zero > 0 && zero)).join(\"0\") + num;\n  }\n\n  const intrvl = () => {\n    const distance = ends - Math.floor(Date.now() / 1000)\n    document.getElementById('time').innerHTML = zeroPad(Math.floor(distance / 60), 2) + ':' + zeroPad(Math.floor(distance % 60), 2);\n    if (distance <= 0) {\n      clearInterval(x);\n      document.getElementById('time').innerHTML = '00:00';\n    }\n  }\n\n  const x = setInterval(intrvl, 1000);\n\n  const highlight = n => {\n    let tmp = Object.assign({},highlights);\n    tmp[n] = !tmp[n];\n    highlightsSet(tmp);\n  }\n\n  return (\n    <div className=\"container\">\n      <ul className=\"collapsible\" id=\"collapsible\">\n        <li>\n          <div className=\"collapsible-header background1F\"><i className=\"material-icons\">assignment_ind</i>Your Role</div>\n          <div className=\"collapsible-body background1F\"><span>{props.place}</span></div>\n        </li>\n      </ul>\n      {props.admin ?\n        <div className=\"row\">\n          <div className=\"col s12 center-align\">\n            <a className=\"waves-light btn grey darken-1\" onClick={props.startVoting}>Start Voting</a>\n          </div>\n        </div>\n      : null}\n      <div className=\"row center-align\">\n        <h5 id=\"time\"></h5>\n      </div>\n      <div className=\"row\">\n        {Object.keys(places).map((name, i) => {\n          if(places[name]){\n            return (\n              <div className=\"col s6 m4 center-align\" key={i}>\n                <div\n                  className={highlights[name] ? 'pactive truncate' : 'pnotactive truncate'}\n                  style={{margin: '15px 10px', padding: '10px 3px', borderRadius: '2px'}}\n                  onClick={() => highlight(name)}\n                >\n                  {name}\n                </div>\n              </div>\n            )\n          }\n        })}\n      </div>\n    </div>\n  );\n}\n\nexport default Started;\n","import React, { useState, useEffect } from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport { useHistory } from \"react-router-dom\";\nimport M from 'materialize-css';\nconst axios = require('axios');\n\nconst api = process.env.REACT_APP_API\n\nfunction Voting(props) {\n  const votes = props.votes;\n  const [vote, voteSet] = useState('');\n\n  const castVote = n => {\n    if(n !== vote){\n      props.castVote(n);\n      voteSet(n);\n    } else{\n      console.log('vote already added on this player', n)\n    }\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"section\"></div>\n      {props.admin ?\n        <div className=\"row\">\n          <div className=\"col s12 center-align\">\n            <a className=\"waves-light btn grey darken-1\" onClick={props.endGame}>End Game</a>\n          </div>\n        </div>\n      : null}\n      <div className=\"row\">\n        {Object.keys(votes).map((name, i) =>\n          <div className=\"col s12\" key={i}>\n            <div className=\"col s1 m3\"></div>\n            <div className=\"col s3 m2\">\n              <h4>{name}</h4>\n            </div>\n            <div className=\"col s4 m2 right-align\">\n              <h4>{votes[name].length}</h4>\n            </div>\n            <div className=\"col s3 m2 right-align\" style={{marginTop: '25px'}}>\n              <a className=\"btn-small grey darken-1\" onClick={() => castVote(name)}>Vote</a>\n            </div>\n            <div className=\"col s1 m3\"></div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default Voting;\n","import React, { useState, useEffect } from 'react';\nimport { Link, BrowserRouter } from 'react-router-dom';\nimport useStateWithCallback from 'use-state-with-callback';\nimport M from 'materialize-css';\nimport PreGame from './Pregame';\nimport Started from './Started';\nimport Voting from './Voting';\nconst axios = require('axios');\n\nconst api = process.env.REACT_APP_API\nconst wsApi = process.env.REACT_APP_WS_API\nlet ws = null;\n\nfunction Game(props) {\n  const gameName = props.match.params.id;\n  const [name, nameSet] = useState(localStorage.getItem('username') || '');\n  const [players, playersSet] = useState([]);\n  const [time, timeSet] = useState(0);\n  const [admin, adminSet] = useState('');\n  const [places, placesSet] = useState([]);\n  const [ends, endsSet] = useState(0);\n  const [stage, stageSet] = useState('');\n  const [spy, spySet] = useState('');\n  const [place, placeSet] = useState('');\n  const [votes, votesSet] = useState({});\n\n  useEffect(() => {\n    // initiate stuff\n    const modal = document.getElementById('modal');\n    M.Modal.init(modal, {dismissible: false});\n\n    if(name.length > 0){\n      initWs();\n    }else {\n      M.Modal.getInstance(document.getElementById('modal')).open();\n    }\n  }, []);\n\n  const setName = () => {\n    const username = document.getElementById('name').value;\n    if(username.length > 0){\n      localStorage.setItem('username', username);\n      M.Modal.getInstance(document.getElementById('modal')).close();\n      nameSet(username);\n      initWs();\n    }\n  }\n\n  const initWs = () => {\n    ws = new WebSocket(\"wss://rybieudko.pl/spy/ws\");\n    ws.onmessage = msg => onMessage(msg);\n    ws.onopen = () => {\n      let msg = JSON.stringify({'action': 'init', 'data':{'gameName': gameName, 'userName': localStorage.getItem('username')}})\n      ws.send(msg);\n    };\n  }\n\n  const onMessage = msg => {\n    msg = JSON.parse(msg.data)\n    if(msg.action == 'init'){\n      const data = msg.data;\n      playersSet(data.players);\n      timeSet(data.time);\n      adminSet(data.admin);\n      placesSet(data.places);\n      stageSet(data.stage);\n      endsSet(data.ends);\n      spySet(data.spy);\n      placeSet(data.place);\n      votesSet(data.votes);\n    } else if(msg.action == 'update_players'){\n      playersSet(msg.data.players)\n    } else if(msg.action == 'start'){\n      const data = msg.data;\n      endsSet(data.ends);\n      spySet(data.spy);\n      placeSet(data.place);\n      stageSet(data.stage);\n      votesSet(data.votes);\n    } else if(msg.action == 'update_place'){\n      placesSet(msg.data.places)\n    } else if(msg.action == 'vote'){\n      votesSet(msg.data)\n    } else if(msg.action == 'start_voting'){\n      stageSet('voting')\n    } else if(msg.action == 'end_game'){\n      const data = msg.data;\n      stageSet(data.stage);\n      votesSet(data.votes);\n      placeSet(data.place);\n      spySet(data.spy);\n      votesSet(data.votes);\n    } else if(msg.action == 'update_time'){\n      timeSet(msg.data.time)\n    }\n  }\n\n  const startGame = () => {\n    let msg = JSON.stringify({'action': 'start', 'data': {'game': props.match.params.id}})\n    ws.send(msg)\n  }\n\n  const updatePlace = n => {\n    let msg = JSON.stringify({'action': 'update_place', 'data': {'place': n, 'game': gameName}})\n    ws.send(msg)\n  }\n\n  const addPlace = () => {\n    const place = document.getElementById('place');\n    if (place.value.length > 0){\n      let msg = JSON.stringify({'action': 'add_place', 'data': {'place': place.value, 'game': gameName}})\n      ws.send(msg)\n      place.value = '';\n    }\n  }\n\n  const startVoting = () => {\n    let msg = JSON.stringify({'action': 'start_voting', 'data': {'game': gameName}})\n    ws.send(msg)\n  }\n\n  const castVote = n => {\n    let msg = JSON.stringify({\n      'action': 'vote',\n      'data': {'game': gameName, 'user': name, 'vote': n}\n    })\n    ws.send(msg)\n  }\n\n  const endGame = () => {\n    let msg = JSON.stringify({'action': 'end_game', 'data': {'game': gameName}})\n    ws.send(msg)\n  }\n\n  const updateTime = t => {\n    let msg = JSON.stringify({'action': 'update_time', 'data': {'game': gameName, 'time': t}})\n    ws.send(msg)\n  }\n\n\n  return (\n    <div>\n      {stage == 'pregame' ?\n        <PreGame\n          players={players}\n          admin={admin == name}\n          places={places}\n          startGame={startGame}\n          addPlace={addPlace}\n          updatePlace={updatePlace}\n          time={time}\n          updateTime={updateTime}\n        />\n        : stage == 'started' ?\n        <Started\n          ends={ends}\n          admin={admin == name}\n          places={places}\n          place={spy == name ? 'spy' : place}\n          startVoting={startVoting}\n        />\n        : stage == 'voting' ?\n        <Voting\n          votes={votes}\n          admin={admin == name}\n          castVote={castVote}\n          endGame={endGame}\n        />\n        : null\n      }\n      {name.length > 0 ? null :\n      <div id=\"modal\" className=\"modal\" style={{backgroundColor: '#1F1F1F'}}>\n        <div className=\"modal-content\">\n          <div className=\"section\"></div>\n          <div className=\"input-field\">\n            <input id=\"name\" type=\"text\" className=\"validate\" autoComplete=\"off\" />\n            <label for=\"name\">Your Name</label>\n          </div>\n          <div className=\"row\">\n            <div className=\"col s12 center-align\">\n              <a className=\"waves-light btn grey darken-1\" onClick={setName}>Set name</a>\n            </div>\n          </div>\n        </div>\n      </div>\n      }\n    </div>\n  );\n}\n\nexport default Game;\n","import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\nimport M from 'materialize-css';\nimport Home from './Home.js';\nimport Create from './Create.js';\nimport Game from './Game.js';\nconst axios = require('axios');\n\nconst api = process.env.REACT_APP_API\n\nfunction App() {\n  const [games, setGames] = useState([]);\n  const [name, setName] = useState('');\n\n  useEffect(() => {\n    axios.get(api + '/game')\n    .then(r => setGames(r.data));\n  }, []);\n\n\n  const createGame = () => {\n    axios.post(api + '/game?name=abc')\n    .then(res => console.log(res))\n  }\n\n  return (\n    <Router basename=\"/spy\">\n      <div>\n        <Switch>\n          <Route path=\"/create\">\n            <Create setName={name => setName(name)}/>\n          </Route>\n          <Route path=\"/:id\" component={Game} />\n          <Route path=\"/\">\n            <Home />\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}